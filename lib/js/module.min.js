/*! ecb2 module.js - v1.3 */
function update_repeater(e){var t=[];e.find(".repeater-field").each(function(){t.push($(this).val())}),$(e.data("parent")).val(t.join("||"))}function ECB2CBInputlength(e){var t=e.children(":not(.placeholder)").length,a=e.data("required-number");if(a>0)return t<=a;var n=e.data("max-number");return!(n>0)||t<=n}function updateECB2CBInput(e){var t,a=$("#"+e.data("cmsms-cb-input"));ECB2CBInputlength(e)?(e.children(":not(.placeholder)").each(function(e){0==e?t=$(this).data("cmsms-item-id"):t+=","+$(this).data("cmsms-item-id")}),a.val(t)):a.val("")}function updateECB2Placeholder(e){var t=e.data("required-number"),a=e.children().length-1;!t&&a>0||t>0&&a==t?e.children(".placeholder").addClass("hidden"):e.children(".placeholder").removeClass("hidden")}$(function(){$(".ecb_file_selector_select > select").on("change",function(){var e=$(this).parent().next();e.attr("src",e.data("uploadsurl")+"/"+$(this).val())}).trigger("change"),$(".ecb_multiple_select > select").on("change",function(){var e=$(this).val()?$(this).val().join(","):"";$(this).siblings(".ecb_select_input").val(e);var t=$(this).siblings(".ecb_select_summary");if(t.length>0){var a=$(this).children("option:selected").map(function(){return $(this).text()}).get().join(", ");$(this).siblings(".ecb_select_summary").val(a);var n=$(this).siblings(".ecb_select_summary").children(".ecb_select_text");""==a?t.children(".ecb_select_text").html(n.data("empty")):t.children(".ecb_select_text").html(a)}}),$(".ecb_compact .ecb_select_edit").on("click",function(e){e.preventDefault(),$(this).closest(".ecb_compact").toggleClass("show")}),$(".ecb2_repeater").sortable({cursor:"move",items:"> .repeater-wrapper",stop:function(e,t){update_repeater($(this))}}).find(".repeater-field").on("change",function(e){update_repeater($($(this).data("repeater")))})});
